(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{135:function(e,t,a){e.exports=a.p+"static/media/oops.b0ef4f6a.png"},176:function(e,t,a){e.exports=a(367)},181:function(e,t,a){},183:function(e,t,a){},367:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(28),c=a.n(s),o=(a(181),a(11)),i=a.n(o),l=a(7),u=(a(183),a(135)),m=a.n(u),v=a(14);var d=function(e){var t=e.users,a=function(){return r.a.createElement(v.f,{x:0,y:0,dx:-90,dy:40,textAnchor:"middle",width:180,transform:"rotate(-90)"},"Conversions")};return t.map((function(e){return r.a.createElement("div",{key:e.id},e.avatar&&r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"basic-info"},r.a.createElement("div",null,r.a.createElement("img",{src:e.avatar,alt:"icon",onError:function(e){return e.target.setAttribute("src",m.a)}})),r.a.createElement("div",{className:"desc"},r.a.createElement("h2",{className:"name"},e.name),r.a.createElement("p",{className:"occu"},e.occupation)))),!e.avatar&&r.a.createElement("div",{className:"basic-info"},r.a.createElement("div",{"data-name":e.name.charAt(0)}),r.a.createElement("div",{className:"desc"},r.a.createElement("h2",{className:"name"},e.name),r.a.createElement("p",{className:"occu"},e.occupation))),r.a.createElement("div",{className:"infographics"},r.a.createElement("div",null,r.a.createElement("span",{className:"chart"},"Conversions Per Day"),r.a.createElement(v.e,{width:"100%",height:200},r.a.createElement(v.d,{data:e.data,margin:{top:5,right:10,left:0,bottom:5}},r.a.createElement(v.a,{strokeDasharray:"0 0"}),r.a.createElement(v.h,{tick:{fontSize:10},dataKey:"name"},r.a.createElement(v.b,{value:"Dates",offset:-5,position:"insideBottom"})),r.a.createElement(v.i,{tick:{fontSize:10},label:r.a.createElement(a,null)}),r.a.createElement(v.g,null),r.a.createElement(v.c,{type:"monotone",dataKey:"conversions",stroke:"#82ca9d"})))),r.a.createElement("div",{className:"summary"},r.a.createElement("span",{className:"impress"},e.totalImpress),r.a.createElement("span",{className:"types"},"impressions"),r.a.createElement("span",{className:"convert"},e.totalConvert),r.a.createElement("span",{className:"types"},"conversions"),r.a.createElement("p",{className:"money"},"$",Math.round(e.revenue)))))}))};var p=function(e){var t=e.users,a=e.logs,s=Object(n.useState)(!0),c=Object(l.a)(s,2),o=c[0],i=c[1],u=Object(n.useState)(!0),m=Object(l.a)(u,2),v=m[0],p=m[1],f=Object(n.useState)(!0),E=Object(l.a)(f,2),h=E[0],b=E[1],y=Object(n.useState)(!0),g=Object(l.a)(y,2),N=g[0],w=g[1],j=Object(n.useState)(!1),O=Object(l.a)(j,2),k=O[0],C=O[1];return function(){if(!k){var e={},n=function(e,t){return e+t};a.forEach((function(t){e[t.user_id]||(e[t.user_id]={time:[],type:[],revenue:[],impressions:[],conversions:[]}),"impression"===t.type?e[t.user_id].impressions.push(t.time):e[t.user_id].conversions.push(new Date(t.time)),e[t.user_id].time.push(t.time),e[t.user_id].type.push(t.type),e[t.user_id].revenue.push(t.revenue)})),t.map((function(t){var a={};e[t.id].conversions.sort((function(e,t){return e-t})),e[t.id].conversions.forEach((function(e){var t=e.getMonth()+1+"/"+e.getDate();a[t]||(a[t]=[]),a[t].push(e)})),t.totalImpress=e[t.id].impressions.length,t.totalConvert=e[t.id].conversions.length,t.revenue=e[t.id].revenue.reduce(n),t.dates=a;var r=[];for(var s in a){var c={name:s,conversions:a[s].length};r.push(c)}return t.data=r,t})),C(!0)}}(),r.a.createElement("div",null,r.a.createElement("h1",null,"Marketing Summary"),r.a.createElement("div",{className:"buttonContainer"},r.a.createElement("button",{className:"sortButton",onClick:function(){t.sort((function(e,t){return e.name.localeCompare(t.name)})),o||t.reverse(),i(!o)}},"By name ",o?"asc":"desc"),r.a.createElement("button",{className:"sortButton",onClick:function(){t.sort((function(e,t){return e.totalImpress-t.totalImpress})),h||t.reverse(),b(!h)}},"By impressions ",h?"asc":"desc"),r.a.createElement("button",{className:"sortButton",onClick:function(){t.sort((function(e,t){return e.totalConvert-t.totalConvert})),N||t.reverse(),w(!N)}},"By conversions ",N?"asc":"desc"),r.a.createElement("button",{className:"sortButton",onClick:function(){t.sort((function(e,t){return e.revenue-t.revenue})),v||t.reverse(),p(!v)}},"By revenue ",v?"asc":"desc")),r.a.createElement("div",{className:"grid"},r.a.createElement(d,{users:t})))};var f=function(){var e=Object(n.useState)([]),t=Object(l.a)(e,2),a=t[0],s=t[1],c=Object(n.useState)([]),o=Object(l.a)(c,2),u=o[0],m=o[1];function v(){var e,t,a=arguments;return i.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e=a.length>0&&void 0!==a[0]?a[0]:"",n.next=3,i.a.awrap(fetch(e,{method:"GET",mode:"cors",cache:"no-cache",credentials:"same-origin",headers:{"Content-Type":"application/json"},redirect:"follow",referrer:"no-referrer"}));case 3:return t=n.sent,n.next=6,i.a.awrap(t.json());case 6:return n.abrupt("return",n.sent);case 7:case"end":return n.stop()}}))}return Object(n.useEffect)((function(){!function(){var e;i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(v("/api/users"));case 2:e=t.sent,s(e);case 4:case"end":return t.stop()}}))}(),function(){var e;i.a.async((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i.a.awrap(v("/api/logs"));case 2:e=t.sent,m(e);case 4:case"end":return t.stop()}}))}()}),[]),r.a.createElement("div",{className:"App"},u.length>0&&r.a.createElement(p,{users:a,logs:u}))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(f,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[176,1,2]]]);
//# sourceMappingURL=main.b2d9052d.chunk.js.map